<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta name="baidu-site-verification" content="Y1BuCj8QZI" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="每天进步一点">
<meta property="og:type" content="website">
<meta property="og:title" content="记录点滴成长">
<meta property="og:url" content="http://jianwl.com/page/9/index.html">
<meta property="og:site_name" content="记录点滴成长">
<meta property="og:description" content="每天进步一点">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记录点滴成长">
<meta name="twitter:description" content="每天进步一点">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://jianwl.com/page/9/"/>

  <title> 记录点滴成长 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">记录点滴成长</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-books">
          <a href="/books" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            书单
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/24/retrofit2入门篇/" itemprop="url">
                  retrofit2入门篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-24T09:28:35+08:00" content="2016-06-24">
              2016-06-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/HTTP/" itemprop="url" rel="index">
                    <span itemprop="name">HTTP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/24/retrofit2入门篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/24/retrofit2入门篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Retrofit是什么？"><a href="#Retrofit是什么？" class="headerlink" title="Retrofit是什么？"></a>Retrofit是什么？</h4><blockquote>
<p>A type-safe HTTP client for Android and Java</p>
</blockquote>
<p>你将会用注解去描述HTTP请求，同时Retrofit默认集成URL参数替换和参数查询，并支持Multipart请求和文件上传。</p>
<h4 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">  &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;</div><div class="line">  &lt;artifactId&gt;retrofit&lt;/artifactId&gt;</div><div class="line">  &lt;version&gt;2.1.0&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<h4 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h4><ul>
<li><p>创建Retrofit实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">package com.example.xingren;</div><div class="line"></div><div class="line">import retrofit2.Call;</div><div class="line">import retrofit2.Retrofit;</div><div class="line">import retrofit2.converter.gson.GsonConverterFactory;</div><div class="line">import java.io.IOException;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by weilin on 29/6/2016.</div><div class="line"> */</div><div class="line">public class RetrofitDemo &#123;</div><div class="line">    private static final String BASE_URL = &quot;https://api.github.com&quot;;</div><div class="line">    public static void main(String[] args) throws IOException &#123;</div><div class="line">        Retrofit retrofit = new Retrofit.Builder()</div><div class="line">                .baseUrl(BASE_URL)</div><div class="line">                .addConverterFactory(GsonConverterFactory.create())</div><div class="line">                .build();</div><div class="line"></div><div class="line">        // create instance for githubApi</div><div class="line">        GithubAPI github = retrofit.create(GithubAPI.class);</div><div class="line">        Call&lt;List&lt;ContributorsQO&gt;&gt; call = github.contributors(&quot;shuangziliuyun&quot;,&quot;spring-boot-thymeleaf&quot;);</div><div class="line">        List&lt;ContributorsQO&gt; all = call.execute().body();</div><div class="line">        all.forEach(contributor -&gt; &#123;</div><div class="line">            System.out.println(&quot;name = &quot; + contributor.getLogin() + &quot; starts = &quot; + contributor.getContributions());</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>定义接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">package com.example.xingren;</div><div class="line"></div><div class="line">import retrofit2.Call;</div><div class="line">import retrofit2.http.GET;</div><div class="line">import retrofit2.http.Path;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by weilin on 29/6/2016.</div><div class="line"> */</div><div class="line">public interface GithubAPI &#123;</div><div class="line">    @GET(&quot;/repos/&#123;owner&#125;/&#123;repo&#125;/contributors&quot;)</div><div class="line">    Call&lt;List&lt;ContributorsQO&gt;&gt; contributors(</div><div class="line">            @Path(&quot;owner&quot;) String owner,</div><div class="line">            @Path(&quot;repo&quot;) String repo);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>模型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">package com.example.xingren;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by weilin on 29/6/2016.</div><div class="line"> */</div><div class="line">public class ContributorsQO &#123;</div><div class="line">    private String login;</div><div class="line">    private Integer contributions;</div><div class="line"></div><div class="line">    public Integer getContributions() &#123;</div><div class="line">        return contributions;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setContributions(Integer contributions) &#123;</div><div class="line">        this.contributions = contributions;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getLogin() &#123;</div><div class="line">        return login;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setLogin(String login) &#123;</div><div class="line">        this.login = login;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ol>
<li><p><a href="http://yaohepeng.com/2016/03/31/Retrofit%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" target="_blank" rel="external">Retrofit入门使用教程</a></p>
</li>
<li><p><a href="https://github.com/square/retrofit" target="_blank" rel="external">Retrofit官网</a></p>
<p>​</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/24/Hystrix入门篇/" itemprop="url">
                  Hystrix入门篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-24T09:28:10+08:00" content="2016-06-24">
              2016-06-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Hystrix/" itemprop="url" rel="index">
                    <span itemprop="name">Hystrix</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/24/Hystrix入门篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/24/Hystrix入门篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Hystrix是什么？"><a href="#Hystrix是什么？" class="headerlink" title="Hystrix是什么？"></a>Hystrix是什么？</h4><p>Hystrix是Netflix针对微服务分布式系统的熔断保护中间件，在分布式环境中，难免有些服务依赖会失败，通过Hystrix可以添加延迟容忍和容错逻辑，控制这些分布式服务之间的交互。同时设计隔离访问远程服务端点，防止级联爆炸式的失败，能够让复杂的分布式系统更加灵活具有弹性。</p>
<h4 id="Hystrix能够做些什么？"><a href="#Hystrix能够做些什么？" class="headerlink" title="Hystrix能够做些什么？"></a>Hystrix能够做些什么？</h4><ul>
<li>通过第三方客户端库对访问的依赖关系的延迟和失败给予保护和控制（通过是网络上）</li>
<li>在复杂的分布式系统中停止级联故障</li>
<li>快速失败和快速恢复</li>
<li>回退和优雅的降级</li>
<li>近实时监控、报警和操作控制</li>
</ul>
<h1 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/22/Java-Lambda表达式入门/" itemprop="url">
                  Java Lambda表达式入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-22T23:37:37+08:00" content="2016-06-22">
              2016-06-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/22/Java-Lambda表达式入门/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/22/Java-Lambda表达式入门/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Lambda表达式语法"><a href="#Lambda表达式语法" class="headerlink" title="Lambda表达式语法"></a>Lambda表达式语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1. (parameters) -&gt; expression</div><div class="line"></div><div class="line">2. (parameters) -&gt; &#123;statements;&#125;</div></pre></td></tr></table></figure>
<h4 id="Lambda作用域"><a href="#Lambda作用域" class="headerlink" title="Lambda作用域"></a>Lambda作用域</h4><p>Lambda表达式可以访问 外部作用域带有final修饰符的变量、实例变量和静态变量</p>
<ul>
<li><p>访问本地变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">int tempNum = 5; //tempNum将被隐式地转换为final类型；</div><div class="line">List&lt;Integer&gt; nums = Arrays.asList(1,2,3);</div><div class="line">nums.stream.map(num -&gt; num + tempNum);</div></pre></td></tr></table></figure>
</li>
<li><p>访问域变量和静态变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">public class LambdaTest &#123;</div><div class="line">    static int outStaticNum;</div><div class="line">    int outNum;</div><div class="line"></div><div class="line">    void testScope() &#123;</div><div class="line">        List&lt;Integer&gt; nums = Arrays.asList(1, 2, 3, 4);</div><div class="line">        nums.stream().forEach(num -&gt; &#123;</div><div class="line">            outNum = 33;</div><div class="line">            outNum = outNum + num; //outNum值可以改变，非final</div><div class="line">            System.out.println(outNum + num);</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        System.out.println(&quot; =================== &quot;);</div><div class="line">        nums.stream().forEach(num -&gt; &#123;</div><div class="line">            outStaticNum = 73;</div><div class="line">            System.out.println(outStaticNum + num);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>相比本地变量，对于实例变量和静态变量，lambda表达式既有读的权限，也有写的权限；</p>
</li>
</ul>
<h4 id="内置函数式接口"><a href="#内置函数式接口" class="headerlink" title="内置函数式接口"></a>内置函数式接口</h4><ul>
<li><p>Predicates</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//Predicate接口是返回boolean值的接口；</div><div class="line">Predicate&lt;String&gt; predicate = (s) -&gt; s.length() &gt; 0;</div></pre></td></tr></table></figure>
</li>
<li><p>Functions</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//接收一个参数，返回一个结果</div><div class="line">Function&lt;String,Integer&gt; toInteger = Integer::valueOf;</div><div class="line">Function&lt;String,String&gt; backToString = toInteger.andThen(String::valueOf);</div><div class="line"></div><div class="line">backToString.apply(&quot;123&quot;);</div></pre></td></tr></table></figure>
</li>
<li><p>Suppliers</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 根据给定的范型返回一个结果，不需要传入参数</div><div class="line">Supplier&lt;Person&gt; personSupplier = Person::new;</div><div class="line">personSupplier.get(); //new Person</div></pre></td></tr></table></figure>
</li>
<li><p>Consumers</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//Consumer接口代表一类只接收一个参数的操作</div><div class="line">Consumer&lt;Person&gt; greeter = (p) -&gt; System.out.println(&quot;Hello&quot; + p.getFirstName());</div><div class="line">greeter.accept(new Person(&quot;Lucy&quot;,&quot;Tom&quot;));</div></pre></td></tr></table></figure>
</li>
<li><p>Comparators</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Comparator&lt;Person&gt; comparator = (p1, p2) -&gt; p1.firstName.compareTo(p2.firstName);</div><div class="line"></div><div class="line">Person p1 = new Person(&quot;John&quot;, &quot;Doe&quot;);</div><div class="line">Person p2 = new Person(&quot;Alice&quot;, &quot;Wonderland&quot;);</div><div class="line"></div><div class="line">comparator.compare(p1, p2);             // &gt; 0</div><div class="line">comparator.reversed().compare(p1, p2);  // &lt; 0</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Lambda表达式简单例子"><a href="#Lambda表达式简单例子" class="headerlink" title="Lambda表达式简单例子"></a>Lambda表达式简单例子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1. () -&gt; 5 //不需要参数，返回值为5；</div><div class="line"></div><div class="line">2. x -&gt; 2 * x //接收一个参数(数字类型)，返回其2倍的值</div><div class="line"></div><div class="line">3. (x,y) -&gt; x - y //接收2个参数，并返回他们的差值</div><div class="line"></div><div class="line">4. (String s) -&gt; System.out.println(s) //接收一个string对象，并在控制台打印，不返回任何值</div></pre></td></tr></table></figure>
<h4 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">String str[] = [&quot;KUFA&quot;,&quot;LINDA&quot;,&quot;DAVID&quot;];</div><div class="line">List&lt;String&gt; strs = Arrays.asList(str);</div><div class="line"></div><div class="line">//以前遍历方式</div><div class="line">for(String s : strs)&#123;</div><div class="line">  System.out.println(s + &quot; , &quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//lambda表达式</div><div class="line">strs.forEach((s) -&gt; System.out.println(s + &quot;,&quot;));</div></pre></td></tr></table></figure>
<h4 id="使用Lambda排序集合"><a href="#使用Lambda排序集合" class="headerlink" title="使用Lambda排序集合"></a>使用Lambda排序集合</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; names = Arrays.asList(&quot;Tom&quot;,&quot;Luck&quot;,&quot;Jane&quot;,&quot;Wiliam&quot;);</div><div class="line"></div><div class="line">//从小到大排序</div><div class="line">names.stream().sorted((name1,name2) -&gt; name1.compareTo(name2)).forEach(System.out::println);</div></pre></td></tr></table></figure>
<h4 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; names = Arrays.asList(&quot;Tom&quot;,&quot;Luck&quot;,&quot;Jane&quot;,&quot;Wiliam&quot;);</div><div class="line"></div><div class="line">names.stream().filter(name -&gt;!name.equals(&quot;Tom&quot;)).forEach(System.out::println);</div></pre></td></tr></table></figure>
<h4 id="使用转换函数，对Stream流中的元素，进行转换操作"><a href="#使用转换函数，对Stream流中的元素，进行转换操作" class="headerlink" title="使用转换函数，对Stream流中的元素，进行转换操作"></a>使用转换函数，对Stream流中的元素，进行转换操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; names = Arrays.asList(&quot;Tom&quot;,&quot;Luck&quot;,&quot;Jane&quot;,&quot;Wiliam&quot;);</div><div class="line"></div><div class="line">names.stream().map( name -&gt; name.concat(&quot; -- &quot;)).forEach(System.out::println);</div></pre></td></tr></table></figure>
<h4 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; names = Arrays.asList(&quot;Tom&quot;,&quot;Luck&quot;,&quot;Jane&quot;,&quot;Wiliam&quot;);</div><div class="line"></div><div class="line">//Reduce操作 类似于(A,B,C,D) -&gt; A = A + B； A = A + C； A = A + D；最后输出A</div><div class="line">String reduceName = names.stream().reduce((name1,name2) -&gt; name1 = name1.concat(&quot;-&quot;+name2)).orElseThrow(() -&gt; new IllegalArgumentException(&quot;无法输出结果!&quot;));</div><div class="line"></div><div class="line">System.out.println(reduceName);</div></pre></td></tr></table></figure>
<h4 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; names = Arrays.asList(&quot;Tom&quot;,&quot;Luck&quot;,&quot;Jane&quot;,&quot;Wiliam&quot;);</div><div class="line">//任意匹配其中一个</div><div class="line">Boolean isExistAny = names.stream().anyMatch(name -&gt; name.equals(&quot;Tom&quot;));</div><div class="line"></div><div class="line">//所有元素均匹配</div><div class="line">Boolean isExistAll = names.stream().allMatch(name -&gt; name.equals(&quot;Tom&quot;));</div><div class="line"></div><div class="line">//没有一个元素匹配</div><div class="line">Boolean isExistNone = names.stream().noneMatch(name -&gt; name.equals(&quot;Tom&quot;));</div><div class="line">System.out.println(&quot;isExistAny = &quot; + isExistAny + &quot; isExistAll = &quot; + isExistAll + &quot; isExistNone = &quot; +isExistNone);</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/18/JOOQ之CURD语法/" itemprop="url">
                  JOOQ之CURD语法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-18T00:46:08+08:00" content="2016-06-18">
              2016-06-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JOOQ/" itemprop="url" rel="index">
                    <span itemprop="name">JOOQ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/18/JOOQ之CURD语法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/18/JOOQ之CURD语法/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近，刚接触JOOQ，对于JOOQ增删该查的语法做一个归纳，以便查询。</p>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><ul>
<li>常用查询样例</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">DSLContext create = DSL.using(connection, dialect);</div><div class="line">create.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, count())</div><div class="line">      .from(AUTHOR)</div><div class="line">      .join(BOOK).on(BOOK.AUTHOR_ID.equal(AUTHOR.ID))  //内联结</div><div class="line">      .where(AUTHOR.ID.in(select(BOOK.TITLE).from(BOOK))) </div><div class="line">      .and(BOOK.PUBLISHED.greaterThan(&quot;2008-01-01&quot;))</div><div class="line">      .groupBy(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME)  //分组</div><div class="line">      .having(count().greaterThan(5))  //分组过滤</div><div class="line">      .orderBy(AUTHOR.LAST_NAME.asc().nullsFirst()) //排序</div><div class="line">      .limit(2) // 分页</div><div class="line">      .offset(1) // 偏移量</div><div class="line">      .forUpdate()</div><div class="line">      .fetch();</div></pre></td></tr></table></figure>
<ul>
<li>selectQuery拼接查询条件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//实例1</div><div class="line">DSLContext create = DSL.using(connection,dialect);</div><div class="line">SelectQuery&lt;Record&gt; query = create.selectQuery();</div><div class="line">query.addFrom(AUTHOR);</div><div class="line">query.addJoin(BOOK,BOOK.AUTHOR_ID.equal(AUTHOR.ID));</div><div class="line"></div><div class="line">//执行查询条件</div><div class="line">Result&lt;?&gt; result = query.fetch();</div><div class="line"></div><div class="line">//实例2</div><div class="line">DSLContext create = DSL.using(connection,dialect);</div><div class="line">SelectFinalStep&lt;?&gt; select = create.select().from(AUTHOR);</div><div class="line">SelectQuery&lt;?&gt; query = select.getQuery();</div><div class="line">query.addJoin(BOOK,BOOK.AUTHOR_ID.equal(AUTHOR.ID));</div><div class="line"></div><div class="line">//执行查询条件</div><div class="line">Result&lt;?&gt; result = query.fetch();</div></pre></td></tr></table></figure>
<ul>
<li>单表查询</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">BookRecord book = create.selectFrom(BOOK)</div><div class="line">                        .where(BOOK.LANGUAGE.equal(&quot;DE&quot;))</div><div class="line">                        .orderBy(BOOK.TITLE)</div><div class="line">                        .fetchAny();</div></pre></td></tr></table></figure>
<ul>
<li>去重查询</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Select&lt;?&gt; select1 = create.selectDistinct(BOOK.TITLE).fetch();</div><div class="line">等价SQL</div><div class="line">SELECT DISTINCT BOOK.TITLE;</div></pre></td></tr></table></figure>
<ul>
<li>外联结查询</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//左外联结查询：以左表为基准，右表没有的显示为NULL；</div><div class="line">create.select()</div><div class="line">      .from(AUTHOR)</div><div class="line">      .leftOuterJoin(BOOK)</div><div class="line">      .on(BOOK.AUTHOR_ID.equal(AUTHOR.ID)))</div><div class="line">      .fetch();</div></pre></td></tr></table></figure>
<ul>
<li>外键约束为联结条件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> //BOOK.AUTHOR_ID的外键是参考AUTHOR.ID的主键的，则联结条件是符合外键约束。（有多个外键约束时，是否成立？）</div><div class="line">create.select()</div><div class="line">      .from(AUTHOR)</div><div class="line">      .join(BOOK).onKey()</div><div class="line">      .fetch();</div></pre></td></tr></table></figure>
<ul>
<li>事务锁定查询记录 - 即查询这几条记录时，这几条记录不能更改</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">create.select()</div><div class="line">      .from(BOOK)</div><div class="line">      .where(BOOK.ID.equal(3))</div><div class="line">      .forUpdate()</div><div class="line">      .fetch();</div></pre></td></tr></table></figure>
<h3 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h3><ul>
<li>新增一条记录</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">create.insertInto(AUTHOR,</div><div class="line">        AUTHOR.ID, AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME)</div><div class="line">      .values(100, &quot;Hermann&quot;, &quot;Hesse&quot;)</div><div class="line">      .execute();</div></pre></td></tr></table></figure>
<ul>
<li>新增多条记录</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//方式1：</div><div class="line">create.insertInto(AUTHOR,</div><div class="line">        AUTHOR.ID, AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME)</div><div class="line">      .values(100, &quot;Hermann&quot;, &quot;Hesse&quot;)</div><div class="line">      .values(101, &quot;Alfred&quot;, &quot;Döblin&quot;)</div><div class="line">      .execute();  </div><div class="line">//方式2：</div><div class="line">create.insertInto(AUTHOR)</div><div class="line">      .set(AUTHOR.ID, 100)</div><div class="line">      .set(AUTHOR.FIRST_NAME, &quot;Hermann&quot;)</div><div class="line">      .set(AUTHOR.LAST_NAME, &quot;Hesse&quot;)</div><div class="line">      .newRecord()</div><div class="line">      .set(AUTHOR.ID, 101)</div><div class="line">      .set(AUTHOR.FIRST_NAME, &quot;Alfred&quot;)</div><div class="line">      .set(AUTHOR.LAST_NAME, &quot;Döblin&quot;)</div><div class="line">      .execute();</div></pre></td></tr></table></figure>
<ul>
<li>将查询结果，新增到数据表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create.insertInto(AUTHOR_ARCHIVE)</div><div class="line">      .select(selectFrom(AUTHOR).where(AUTHOR.DECEASED.isTrue()))</div><div class="line">      .execute();</div></pre></td></tr></table></figure>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><ul>
<li>更新一条数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// 方式1：</div><div class="line">create.update(AUTHOR)</div><div class="line">      .set(AUTHOR.FIRST_NAME, &quot;Hermann&quot;)</div><div class="line">      .set(AUTHOR.LAST_NAME, &quot;Hesse&quot;)</div><div class="line">      .where(AUTHOR.ID.equal(3))</div><div class="line">      .execute();      </div><div class="line">// 方式2：</div><div class="line">create.update(AUTHOR)</div><div class="line">      .set(AUTHOR.FIRST_NAME,</div><div class="line">         select(PERSON.FIRST_NAME)</div><div class="line">        .from(PERSON)</div><div class="line">        .where(PERSON.ID.equal(AUTHOR.ID))</div><div class="line">      )</div><div class="line">      .where(AUTHOR.ID.equal(3))</div><div class="line">      .execute();</div></pre></td></tr></table></figure>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><ul>
<li>删除一条数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create.delete(AUTHOR)</div><div class="line">      .where(AUTHOR.ID.equal(100))</div><div class="line">      .execute();</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/18/SpringBoot入门篇/" itemprop="url">
                  SpringBoot入门篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-18T00:45:48+08:00" content="2016-06-18">
              2016-06-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SpringBoot/" itemprop="url" rel="index">
                    <span itemprop="name">SpringBoot</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/18/SpringBoot入门篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/18/SpringBoot入门篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="SpringBoot是什么？"><a href="#SpringBoot是什么？" class="headerlink" title="SpringBoot是什么？"></a>SpringBoot是什么？</h3><p>SpringBoot是为了解决Java开发，繁琐的配置、低下的开发效率，复杂的部署流程；它使用“习惯优于配置”的理念让你的项目快速运行起来，使用SpringBoot很容易创建一个独立（运行jar、内嵌Servlet容器）准生产级别的基于Spring的项目，使用SpringBoot可以不用或者只需很少的Spring配置。</p>
<h3 id="SpringBoot的优点"><a href="#SpringBoot的优点" class="headerlink" title="SpringBoot的优点"></a>SpringBoot的优点</h3><ul>
<li>快速构建项目</li>
<li>对主流开发框架的无配置集成</li>
<li>项目可独立运行，无须外部依赖Servlet容器</li>
<li>提供运行时的应用监控</li>
<li>极大地提高了开发、部署效率</li>
<li>与云计算的天然集成</li>
</ul>
<h3 id="SpringBoot的缺点"><a href="#SpringBoot的缺点" class="headerlink" title="SpringBoot的缺点"></a>SpringBoot的缺点</h3><ul>
<li>书籍文档较少且不够深入</li>
</ul>
<h3 id="SpringBoot运行"><a href="#SpringBoot运行" class="headerlink" title="SpringBoot运行"></a>SpringBoot运行</h3><p>Spring Boot通常有一个名为Application的入口类，入口类里有一个main方法，这个main方法其实就是一个标准的Java应用入口。在main方法中使用SpringApplication.run( Application.class,args)来启动SpringBoot项目。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">package org.jooq.example.spring;</div><div class="line"></div><div class="line">import org.springframework.boot.SpringApplication;</div><div class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</div><div class="line"></div><div class="line">/**</div><div class="line"> * @author jianwl</div><div class="line"> */</div><div class="line">@SpringBootApplication</div><div class="line">public class Application &#123;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        SpringApplication.run(Application.class, args);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="SpringBoot-常用注解"><a href="#SpringBoot-常用注解" class="headerlink" title="SpringBoot 常用注解"></a>SpringBoot 常用注解</h3><ul>
<li><p>@Value <code>注入application.properties中定义的属性值</code></p>
</li>
<li><p>@ResponseBody <code>将结果直接填充到HTTP的响应提中，一般用于构建Restful的API</code></p>
</li>
<li><p>@Controller <code>用于定义控制类，spring项目中由控制器负责将用户发来的URL请求转发到对应的服务接口</code></p>
</li>
<li><p>@RestController<code>@ResponseBody和@Controller的合集</code></p>
</li>
<li><p>@RequestMapping <code>提供路由信息，负责URL到Controller中的具体函数映射</code></p>
</li>
<li><p>@EnableAutoConfiguration <code>Spring Boot自动配置,尝试根据你添加的jar依赖自动配置你的Spring应用</code></p>
</li>
<li><p>@ComponentScan <code>将该类自动扫描并注册为Bean，可以自动收集所有的Spring组件，包括@Configuration类</code></p>
</li>
<li><p>@Configuration <code>相对于传统的xml配置文件，如果有些第三方库需要用到xml文件，建议仍然通过@Configuration类作为项目的配置主类，可以通过@ImportResource加载xml配置文件</code></p>
</li>
<li><p>@SpringBootApplication <code>@EnableAutoConfiguration @ComponentScan @Configuration的合集</code></p>
</li>
<li><p>@Import <code>导入其他配置类</code></p>
</li>
<li><p>@ImportResource<code>用来加载xml配置文件</code></p>
</li>
<li><p>@Autowired <code>自动导入依赖的bean</code></p>
</li>
<li><p>@Service <code>用于修饰service层的组件</code></p>
</li>
<li><p>@Reponsitory <code>用于修饰DAO层的组件</code></p>
</li>
<li><p>@Component <code>当组件不好归类时，使用这个注解进行标注</code></p>
</li>
<li><p>@Profile <code>为不同环境下，使用不同的配置提供了支持</code></p>
</li>
<li><p>@ConfigurationProperties <code>注入属性</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">@ConfigurationProperties(locations = &quot;classpath:mail.properties&quot;, </div><div class="line">                         ignoreUnknownFields = false, </div><div class="line">                         prefix = &quot;mail&quot;)</div><div class="line">public class MailProperties &#123; </div><div class="line">  public static class Smtp &#123;  </div><div class="line">    private boolean auth;  </div><div class="line">    private boolean starttlsEnable;  </div><div class="line">    // ... getters and setters </div><div class="line">  &#125;</div><div class="line">  @NotBlank private String host;</div><div class="line">  private int port;  </div><div class="line">  private String from; </div><div class="line">  private String username;</div><div class="line">  private String password; </div><div class="line">  @NotNull private Smtp smtp; </div><div class="line">  // ... getters and setters</div><div class="line">&#125;</div><div class="line"></div><div class="line">// mail.properties</div><div class="line">mail.host=localhost</div><div class="line">mail.port=25</div><div class="line">mail.smtp.auth=false</div><div class="line">mail.smtp.starttlsEnable=false</div><div class="line">mail.from=me@localhost</div><div class="line">mail.username=</div><div class="line">mail.password=</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/15/Thymeleaf入门篇/" itemprop="url">
                  Thymeleaf入门篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-15T16:53:42+08:00" content="2016-06-15">
              2016-06-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Thymeleaf/" itemprop="url" rel="index">
                    <span itemprop="name">Thymeleaf</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/15/Thymeleaf入门篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/15/Thymeleaf入门篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Thymeleaf是什么？"><a href="#Thymeleaf是什么？" class="headerlink" title="Thymeleaf是什么？"></a>Thymeleaf是什么？</h3><p>Thymeleaf是一个跟Volecity、FreeMarker类似的模板引擎，它可以完全替代JSP，跟其他模板引擎，有如下三个吸引人的特点。</p>
<ol>
<li>Thymeleaf 在有网络和无网络的环境下皆可运行，它可以让美工在浏览器查看页面的静态效果，也可以让程序员在服务器查看带数据的动态页面效果。这是由于它支持html原型，然后在html里增加额外的属性来叨叨模板、数据的展现方式。浏览器解释html时会忽略未定义的标签属性，所以thymeleaf的模板可以静态地运行，当有数据返回到页面时，Thymeleaf标签会动态替换掉静态内容，使页面动态显示。</li>
<li>Thymeleaf开箱即用的特性，它提供标准和spring标准两套方言，可以直接套用模板实现JSTL、OGNL表达式效果，避免每天套用模板，该标签的困扰。同时开发人员也可以扩展和创建自定义的方言。</li>
<li>Thymeleaf提供spring标准方言和一个与SpringMVC完美基础的可选模块。可以快速的实现表单绑定、属性编辑器、国际化等功能。</li>
</ol>
<h3 id="Thymeleaf常用语法"><a href="#Thymeleaf常用语法" class="headerlink" title="Thymeleaf常用语法"></a>Thymeleaf常用语法</h3><p>1、访问数据的四种模式</p>
<ul>
<li><code>${}</code>变量表示式，用于访问容器上下文的变量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//HomeController.class</div><div class="line"></div><div class="line">import org.springframework.stereotype.Controller;</div><div class="line">import org.springframework.ui.Model;</div><div class="line">import org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"></div><div class="line">@Controller</div><div class="line">class HomeController &#123;</div><div class="line">    @RequestMapping(&quot;/home&quot;)</div><div class="line">    String home(Model model) &#123;</div><div class="line">        model.addAttribute(&quot;msg&quot;, &quot;welcome to thymeleaf&quot;);</div><div class="line">        return &quot;home&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//home.html (主要代码)</div><div class="line"> &lt;p th:text=&quot;$msg&quot;&gt;&lt;/p&gt;</div></pre></td></tr></table></figure>
<ul>
<li><code>*{}</code>选择表达式，选择表达式获取的是选定对象的变量。通过<code>th:object</code>绑定对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div th:object=&quot;$session.user&quot;&gt; </div><div class="line">&lt;p&gt; name: &lt;span th:text=&quot; *&#123;name&#125; &quot;&gt; &lt;/span&gt; &lt;/p&gt;</div><div class="line">&lt;p&gt; age: &lt;span th:text=&quot; *&#123;age&#125; &quot;&gt; &lt;/span&gt; &lt;/p&gt;</div><div class="line">&lt;p&gt; address: &lt;span th:text=&quot; *&#123;address&#125; &quot;&gt; &lt;/span&gt; &lt;/p&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<ul>
<li><code>#{}</code> 消息表达式，通常与<code>th:text</code>属性一起使用，指明了<code>#{}</code>中key所对应的value。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// WEB-INF/templates/home.html</div><div class="line"> &lt;p th: text=&quot; #&#123;home. welcome&#125;&quot; &gt;This text will not be show! &lt;/p&gt;</div><div class="line"></div><div class="line">// WEB-INF/templates/home.properties</div><div class="line">home.welcome=this messages is from home.properties!</div></pre></td></tr></table></figure>
<ul>
<li><code>@{}</code>超链接URL表达式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">script th:src=&quot;@&#123;/resource/js/jquery/juqery.json-2.4.min.js&#125;&quot;</div></pre></td></tr></table></figure>
<p>2、文本处理</p>
<ul>
<li>数字相加</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//输入结果：In two years, it will be 2018</div><div class="line"> &lt;p&gt;In two years, it will be &lt;span th:text=&quot;2016 + 2&quot;&gt;1494&lt;/span&gt;.&lt;/p&gt;</div></pre></td></tr></table></figure>
<ul>
<li>遍历列表内容 <code>th:each</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// persons为后端传过来的模型数据,List&lt;Person&gt;; Person包含&#123;name,age,address&#125;三个属性</div><div class="line"> &lt;table&gt;</div><div class="line"> &lt;tr th:each=&quot;person : $&#123;persons&#125;&quot;&gt;</div><div class="line"> 	&lt;td th:text=&quot;$&#123;person.name&#125;&quot;&gt;&lt;/td&gt;</div><div class="line"> 	&lt;td th:text=&quot;$&#123;person.age&#125;&quot;&gt;&lt;/td&gt;</div><div class="line"> 	&lt;td th:text=&quot;$&#123;person.address&#125;&quot;&gt;&lt;/td&gt;</div><div class="line"> &lt;/tr&gt;</div><div class="line">&lt;/table&gt;</div></pre></td></tr></table></figure>
<ul>
<li>条件判断</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">th:if</div><div class="line">th:unless</div><div class="line">th:switch</div><div class="line">th:case</div></pre></td></tr></table></figure>
<ul>
<li>本地变量声明</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">th:object</div><div class="line">th:with</div></pre></td></tr></table></figure>
<ul>
<li>内联文本 <code>[[ ]]</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;Hello,[[ $&#123;session.user.name&#125; ]] &lt;/p&gt;</div><div class="line"></div><div class="line">等价于</div><div class="line"></div><div class="line">&lt;p&gt;Hello,&lt;span th:text=&quot;$&#123;session.user.name&#125;&quot;&gt;&lt;/span&gt;&lt;/p&gt;</div></pre></td></tr></table></figure>
<p>3、 设置Attribute</p>
<ul>
<li>th:src=”@{/images/xxx.png}”  设置图片URL 等价于 th:attribute=”src=@{/images/xxx.png}”</li>
<li>th:value 设置属性值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;submit&quot; value=&quot;Subscribe me!&quot; th:value=&quot;#&#123;subscribe.submit&#125;&quot;/&gt;</div></pre></td></tr></table></figure>
<ul>
<li>th:action 等价于 form 的action属性</li>
<li>th:href 设置超链接地址</li>
<li>追加属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">th:attrprepend</div><div class="line">th:attrappend</div></pre></td></tr></table></figure>
<p>4、模板</p>
<ul>
<li>引用模板,引用footer.html的copy模块<code>th:include=&quot;footer :: copy&quot;</code>或<code>th:replace=&quot;footer :: copy&quot;</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// footer.html</div><div class="line">&lt;!DOCTYPE html SYSTEM &quot;http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd&quot;&gt;</div><div class="line"></div><div class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</div><div class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</div><div class="line"></div><div class="line"> &lt;body&gt;</div><div class="line">   &lt;div th:fragment=&quot;copy&quot;&gt;</div><div class="line">     &amp;copy; 2011 The Good Thymes Virtual Grocery</div><div class="line">   &lt;/div&gt;</div><div class="line"> &lt;/body&gt;</div><div class="line"> </div><div class="line"> &lt;/html&gt;</div></pre></td></tr></table></figure>
<p>5、常用的工具类</p>
<ul>
<li><a href="http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#arrays" target="_blank" rel="external">Dates、String、Arrays、Lists、Sets、Maps工具类</a></li>
</ul>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="http://www.cnblogs.com/vinphy/p/4674247.html" target="_blank" rel="external">thymeleaf 学习笔记-基础篇(中文教程)</a></li>
<li><a href="http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html" target="_blank" rel="external">Tutorial: Using Thymeleaf</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/14/JOOQ入门篇/" itemprop="url">
                  JOOQ入门篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-14T22:40:49+08:00" content="2016-06-14">
              2016-06-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JOOQ/" itemprop="url" rel="index">
                    <span itemprop="name">JOOQ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/14/JOOQ入门篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/14/JOOQ入门篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="什么是JOOQ？"><a href="#什么是JOOQ？" class="headerlink" title="什么是JOOQ？"></a>什么是JOOQ？</h3><p><a href="http://www.jooq.org/" target="_blank" rel="external">JOOQ</a>,全称是Java Object Oriented Querying,即面向Java对象查询，它是<a href="http://www.datageekery.com/" target="_blank" rel="external">Data Geekery</a>公司研发的DA方案(Data AccessLayer)主要解决两个问题。</p>
<ol>
<li>Hibernate的抽象使得我们离SQL太远，对SQL的掌控力度弱</li>
<li>JDBC又过于嘈杂，需要干的事情太多</li>
</ol>
<p>JOOQ希望做的就是在上述两者中寻找一个最佳的平衡，它依据数据库中的表生产DA相关代码，开发者将生产的代码引入项目中使用。</p>
<p>有好几个版本</p>
<ul>
<li>OpenSource</li>
<li>Express</li>
<li>Professional</li>
<li>Enterprise</li>
</ul>
<p>OpenSource版本针对开源数据库，其他的几个版本针对非开源项目。</p>
<h3 id="JOOQ框架原理"><a href="#JOOQ框架原理" class="headerlink" title="JOOQ框架原理"></a>JOOQ框架原理</h3><p>在DAO层使用Java语言编写SQL语句，在Intellij IDEA帮助下，复杂SQL的维护变得很容易，通过内部SQL Builder转换成数据库可执行的SQL文本，使用数据库驱动，提交SQL到RDBMS执行，接受处理结果，转换为POJO，返回到应用层。</p>
<h3 id="JOOQ-vs-Hibernate-优势"><a href="#JOOQ-vs-Hibernate-优势" class="headerlink" title="JOOQ vs Hibernate 优势"></a>JOOQ vs Hibernate 优势</h3><p>它与Hibernate不同，不依赖使用字符串变量在Java代码中拼接SQL语句，在复杂SQL语句中，与变量的组合拼接时，SQL被割裂成多个部分，失去了宝贵的可读性，简直是噩梦，而Hibernate饱受诟病的连续查询配置复杂以及HQL语法的问题，在JOOQ不复存在。</p>
<h3 id="JOOQ-vs-Mybatis-优势"><a href="#JOOQ-vs-Mybatis-优势" class="headerlink" title="JOOQ vs Mybatis 优势"></a>JOOQ vs Mybatis 优势</h3><p>它与Mybatis不同，不依赖繁琐分散的XML进行SQL预定义。代码与SQL语句的分离，初衷是为了解决SQL嵌入代码时，带来不直观的复杂性，但是分离的代价是维护工作倍增以及类型转化问题，经常遭遇到应用层代码变更，而XML定义未同步变更，IDE几乎无法解决，又或者开发人员改动一个XML文件，却意外影响多处上层代码，而这个问题很难避免。</p>
<h3 id="JOOQ-优势"><a href="#JOOQ-优势" class="headerlink" title="JOOQ 优势"></a>JOOQ 优势</h3><p>JOOQ提供原生的类型安全转化，以及POJO维护，免去大量一次性代码的编写(通过Maven Plugin实现)；使用这种DAO模式，可以通过类的方式来进行数据库访问，而且对SQL控制粒度加大的同时，维护工作并没有因此倍增，这对于开发人员是更好的解决方案，也是未来的趋势。</p>
<h3 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h3><p>Github下载链接：<code>git@github.com:shuangziliuyun/JOOQ-Study.git</code></p>
<h4 id="With-Mysql"><a href="#With-Mysql" class="headerlink" title="With Mysql"></a>With Mysql</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!--MySQL JDBC driver, 数据库迁移等情况下需要. --&gt;</div><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;5.1.36&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<h4 id="Code-Generation"><a href="#Code-Generation" class="headerlink" title="Code Generation"></a>Code Generation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;!--数据库代码生成的插件 --&gt;</div><div class="line">           &lt;plugin&gt;</div><div class="line">               &lt;!-- Specify the maven code generator plugin --&gt;</div><div class="line">               &lt;groupId&gt;org.jooq&lt;/groupId&gt;</div><div class="line">               &lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;</div><div class="line">               &lt;version&gt;3.8.2&lt;/version&gt;</div><div class="line">               &lt;!-- The plugin should hook into the generate goal --&gt;</div><div class="line">               &lt;executions&gt;</div><div class="line">                   &lt;execution&gt;</div><div class="line">                       &lt;goals&gt;</div><div class="line">                           &lt;goal&gt;generate&lt;/goal&gt;</div><div class="line">                       &lt;/goals&gt;</div><div class="line">                   &lt;/execution&gt;</div><div class="line">               &lt;/executions&gt;</div><div class="line">               &lt;configuration&gt;</div><div class="line">                   &lt;!-- JDBC connection parameters --&gt;</div><div class="line">                   &lt;jdbc&gt;</div><div class="line">                       &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;</div><div class="line">                       &lt;url&gt;$&#123;db.url&#125;&lt;/url&gt;</div><div class="line">                       &lt;user&gt;$&#123;db.username&#125;&lt;/user&gt;</div><div class="line">                       &lt;password&gt;$&#123;db.password&#125;&lt;/password&gt;</div><div class="line">                   &lt;/jdbc&gt;</div><div class="line">                   &lt;!-- Generator parameters --&gt;</div><div class="line">                   &lt;generator&gt;</div><div class="line">                       &lt;database&gt;</div><div class="line">                           &lt;name&gt;org.jooq.util.mysql.MySQLDatabase&lt;/name&gt;</div><div class="line">                           &lt;includes&gt;.*&lt;/includes&gt;</div><div class="line">                           &lt;inputSchema&gt;$&#123;db.schema&#125;&lt;/inputSchema&gt;</div><div class="line">                           &lt;forcedTypes&gt;</div><div class="line">                               &lt;forcedType&gt;</div><div class="line">                                   &lt;name&gt;BOOLEAN&lt;/name&gt;</div><div class="line">                                   &lt;expression&gt;.*\.HANDMADE&lt;/expression&gt;</div><div class="line">                                   &lt;types&gt;.*&lt;/types&gt;</div><div class="line">                               &lt;/forcedType&gt;</div><div class="line">                           &lt;/forcedTypes&gt;</div><div class="line">                       &lt;/database&gt;</div><div class="line">                       &lt;target&gt;</div><div class="line">                           &lt;packageName&gt;com.study.jooq.common.generated&lt;/packageName&gt;</div><div class="line">                           &lt;directory&gt;src/main/java&lt;/directory&gt;</div><div class="line">                       &lt;/target&gt;</div><div class="line">                   &lt;/generator&gt;</div><div class="line">               &lt;/configuration&gt;</div><div class="line">           &lt;/plugin&gt;</div></pre></td></tr></table></figure>
<h4 id="With-Flyway"><a href="#With-Flyway" class="headerlink" title="With Flyway"></a>With Flyway</h4><p>Flyway 是独立于数据库的应用，管理并跟踪数据库变更的数据库版本管理工具</p>
<p><a href="http://www.cnblogs.com/huang0925/p/4409506.html" target="_blank" rel="external">Flyway，数据库Schema管理利器</a></p>
<p>在pom.xml的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;properties&gt;</div><div class="line">    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</div><div class="line"></div><div class="line">    &lt;!--防止maven改动IDE的language level --&gt;</div><div class="line">    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</div><div class="line">    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</div><div class="line"></div><div class="line">    &lt;!--数据库迁移所用的参数 --&gt;</div><div class="line">    &lt;db.url&gt;jdbc:mysql://localhost:3306&lt;/db.url&gt;</div><div class="line">    &lt;db.username&gt;root&lt;/db.username&gt;</div><div class="line">    &lt;db.password&gt;root&lt;/db.password&gt;</div><div class="line">    &lt;db.schema&gt;study&lt;/db.schema&gt;</div><div class="line">&lt;/properties&gt;</div><div class="line"></div><div class="line">&lt;!--数据库迁移, 同步的插件 --&gt;</div><div class="line">        &lt;plugin&gt;</div><div class="line">            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;3.0&lt;/version&gt;</div><div class="line">            &lt;!-- Note that we&apos;re executing the Flyway plugin in the &quot;generate-sources&quot; phase --&gt;</div><div class="line">            &lt;executions&gt;</div><div class="line">                &lt;execution&gt;</div><div class="line">                    &lt;phase&gt;generate-sources&lt;/phase&gt;</div><div class="line">                    &lt;goals&gt;</div><div class="line">                        &lt;goal&gt;migrate&lt;/goal&gt;</div><div class="line">                    &lt;/goals&gt;</div><div class="line">                &lt;/execution&gt;</div><div class="line">            &lt;/executions&gt;</div><div class="line">            &lt;!-- Note that we need to prefix the db/migration path with filesystem:</div><div class="line">            to prevent Flyway from looking for our migration scripts only on the classpath --&gt;</div><div class="line">            &lt;configuration&gt;</div><div class="line">                &lt;url&gt;$&#123;db.url&#125;&lt;/url&gt;</div><div class="line">                &lt;user&gt;$&#123;db.username&#125;&lt;/user&gt;</div><div class="line">                &lt;password&gt;$&#123;db.password&#125;&lt;/password&gt;</div><div class="line">                &lt;encoding&gt;$&#123;project.build.sourceEncoding&#125;&lt;/encoding&gt;</div><div class="line">                &lt;schemas&gt;</div><div class="line">                    &lt;schema&gt;$&#123;db.schema&#125;&lt;/schema&gt;</div><div class="line">                &lt;/schemas&gt;</div><div class="line">                &lt;locations&gt;</div><div class="line">                    &lt;location&gt;filesystem:src/main/resources/db/migration&lt;/location&gt;</div><div class="line">                &lt;/locations&gt;</div><div class="line">            &lt;/configuration&gt;</div><div class="line">        &lt;/plugin&gt;</div></pre></td></tr></table></figure>
<p>在工程：src/main/resources/db/migration目录下，没有目录文件夹时，需要先创建文件夹，放入数据库初始化SQL脚本V1_init_database.sql。注意在maven中配置的db.schema=study,表明需要使用的数据库名称是study，study需要实现不存在。</p>
<p>在执行maven clean、maven install成功后，发现数据库有了新的数据库study，并且该数据库有了order、user、schema_version三张表，user、order是我们在脚本中定义需要生成的表，而schema_version是flyway生产的，维护数据库版本升级时的信息，对应的在代码中，生产了三个POJO。</p>
<p>代码生成示例：<br><img src="/images/generate code.png" alt=""></p>
<h4 id="With-HikariCP"><a href="#With-HikariCP" class="headerlink" title="With HikariCP"></a>With HikariCP</h4><p>HikariCP号称是现在性能最好的JDBC连接池组件，从它现在的发展看来，其可能确实如它宣称的那样，性能高过目前所有的连接池组件。之前对连接池的记忆一直都是C3P0、DBCP、BoneCP、这三者中BoneCP的性能最好，C3P0的性能现在来说确实非常差，而且很久没有更新了。HikariCP毕竟才出来不久，其性能如何，也需要实践检验，若是担心新东西有坑，推荐使用BoneCP.Spring现在也集成了HikaiCP，所以可以尝试用下它。</p>
<p>如何配置使用呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!--JDBC连接池 --&gt;</div><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;2.4.0&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<h4 id="简单的CURD"><a href="#简单的CURD" class="headerlink" title="简单的CURD"></a>简单的CURD</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">try (ScopedContext scopedContext = new ScopedContext()) &#123;//try with resource</div><div class="line">            DSLContext create = scopedContext.getDSLContext();</div><div class="line">            //add</div><div class="line">            UserRecord userRecord = create.newRecord(USER);</div><div class="line">            userRecord.setAge((byte) 18);</div><div class="line">            userRecord.setMobile(&quot;15985236985&quot;);</div><div class="line">            userRecord.setName(&quot;赵六&quot;);</div><div class="line">            userRecord.setSex((byte) 1);</div><div class="line">            userRecord.setPassword(String.valueOf(System.nanoTime()));</div><div class="line">            userRecord.setRegisterTime(new Timestamp(System.currentTimeMillis()));</div><div class="line">            int insertRet = userRecord.insert();//执行insert sql</div><div class="line">            userRecord.store();//可能会执行insert，也有可能执行update，文档说明的很清晰</div><div class="line">            //userRecord.refresh();//从数据库重新加载该记录</div><div class="line">            log.info(&quot;insertRet:&#123;&#125;&quot;, insertRet);</div><div class="line">            log.info(&quot;自增长的uid:&#123;&#125;&quot;, userRecord.getUid());</div><div class="line"></div><div class="line">            //index</div><div class="line">            int createIndexRet = create.createIndex(&quot;user_index_mobile_unique&quot;)</div><div class="line">                    .on(USER, USER.MOBILE)</div><div class="line">                    .execute();//为手机号码字段创建唯一索引</div><div class="line">            int dropIndexRet = create.dropIndex(&quot;user_index_mobile_unique&quot;)</div><div class="line">                    .on(USER)</div><div class="line">                    .execute();//删除索引</div><div class="line">            log.info(&quot;dropIndexRet:&#123;&#125;,createIndexRet:&#123;&#125;&quot;, dropIndexRet, createIndexRet);</div><div class="line"></div><div class="line">            //select</div><div class="line">            Record record = create.select(USER.NAME, USER.UID)</div><div class="line">                    .from(USER)</div><div class="line">                    .where(USER.MOBILE.eq(&quot;15985236985&quot;))</div><div class="line">                    .limit(1)</div><div class="line">                    .fetchOne();</div><div class="line">            log.info(&quot;姓名:&#123;&#125;，uid:&#123;&#125;&quot;, record.getValue(USER.NAME), record.getValue(USER.UID));</div><div class="line"></div><div class="line">            Result&lt;UserRecord&gt; userRecords = create.selectFrom(USER)</div><div class="line">                    .where(USER.SEX.eq((byte) 1).and(USER.MOBILE.like(&quot;159%&quot;)))</div><div class="line">                    .orderBy(USER.MOBILE.asc()).limit(0, 20).fetch();</div><div class="line"></div><div class="line">            for (UserRecord ur : userRecords) &#123;</div><div class="line">                log.info(&quot;mobile:&#123;&#125;,uid:&#123;&#125;,registerTime:&#123;&#125;&quot;, ur.getMobile(), ur.getUid(), ur.getRegisterTime().getTime());</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            //delete</div><div class="line">            int deleteRecordRet = create.deleteFrom(USER).where(USER.UID.eq(userRecord.getUid())).execute();</div><div class="line">            log.info(&quot;deleteRecordRet:&#123;&#125;&quot;, deleteRecordRet);</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="https://blog.jooq.org/2015/03/24/jooq-vs-hibernate-when-to-choose-which/" target="_blank" rel="external">jOOQ vs. Hibernate: When to Choose Which</a></li>
<li><a href="https://blog.jooq.org/2013/07/13/sql-templating-with-jooq-or-mybatis/" target="_blank" rel="external">SQL Templating with jOOQ or MyBatis</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/13/Java8之特性/" itemprop="url">
                  Java8之特性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-13T18:58:26+08:00" content="2016-06-13">
              2016-06-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/13/Java8之特性/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/13/Java8之特性/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Java8为Java语言、编译器、类库、开发工具与JVM带来了大量新的特性，在本教程中，我们将一一探索这些变化，并用真实的例子说明其适用场景。</p>
<h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><p>lambda表达式是整个Java8发行版中最受期待的Java语言层面上的改变，最简单的lambda表达式可以由逗号分隔的参数列表、-&gt;符号和函数体三部分组成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//参数e的类型是由编译器推测出来的,等价于 (String e) -&gt; System.out.println(e);</div><div class="line"></div><div class="line">Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).forEach( e -&gt; System.out.println( e ));</div></pre></td></tr></table></figure>
<p>如果lambda的函数体比较复杂，可以将函数体放到花括号中；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).forEach( e -&gt; &#123;</div><div class="line">    System.out.println( e );</div><div class="line">    System.out.println( e );</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>lambda引用类的成员或局部变量，如果变量不是final，会隐式转换为final，这样效率更高。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// String separator 会被隐式转换为 final String separator</div><div class="line">String separator = &quot;,&quot;;</div><div class="line">Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).forEach ( e -&gt; System.out.println( e + separator ));</div></pre></td></tr></table></figure>
<p>lambda可能会返回一个值，返回值的类型是由编译器推测出来的，lambda的函数体只有一行的话，那么没有必要显式使用return语句。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).sort((e1, e2) -&gt; e1.compareTo(e2) );</div><div class="line"></div><div class="line">//等价于</div><div class="line">Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).sort((e1, e2) -&gt; &#123;</div><div class="line"> 	int result = e1.compareTo(e2) ;</div><div class="line">	return result;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><p>方法引用提供了非常有用的语法，可以直接引用已有Java类和对象的方法或构造器，与lambda联合使用。</p>
<ol>
<li>无参构造器引用，<code>Class::new</code></li>
<li>静态方法引用，<code>Class::static_method</code></li>
<li>特定类的方法引用 <code>Class::method</code></li>
<li>特定对象的方法引用<code>instance::method</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">package com.xingren.java8;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.List;</div><div class="line">import java.util.function.Supplier;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by xingren on 14/6/16.</div><div class="line"> */</div><div class="line">public class CarDemo &#123;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        final Car car = Car.create(Car::new); // 1</div><div class="line">        final List&lt;Car&gt; cars = Arrays.asList(car);</div><div class="line">        </div><div class="line">        cars.forEach(Car::collide); // 2</div><div class="line">        cars.forEach(Car::repair); // 3</div><div class="line">        cars.forEach(car::follow); // 4</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    static class Car &#123;</div><div class="line">        public static Car create( final Supplier&lt;Car&gt; supplier ) &#123;</div><div class="line">            return supplier.get();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public static void collide( final Car car ) &#123;</div><div class="line">            System.out.println( &quot;Collided &quot; + car.toString() );</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public void follow( final Car another ) &#123;</div><div class="line">            System.out.println( &quot;Following the &quot; + another.toString() );</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public void repair() &#123;</div><div class="line">            System.out.println( &quot;Repaired &quot; + this.toString() );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><p>Optional的引入是为了解决空指针异常，Optional实际上是个容器，它可以保存类型T的值，或保存Null，Optional提供了很多方法，这样我们不用显式进行空指针检测。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">package com.xingren.java8;</div><div class="line"></div><div class="line">import java.util.Optional;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by xingren on 14/6/16.</div><div class="line"> */</div><div class="line">public class OptionalTest &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        Optional&lt; String &gt; fullName = Optional.ofNullable( null );</div><div class="line">        System.out.println( &quot;Full Name is set? &quot; + fullName.isPresent() ); </div><div class="line">        System.out.println( &quot;Full Name: &quot; + fullName.orElseGet( () -&gt; &quot;[none]&quot; ) );</div><div class="line">        System.out.println( fullName.map( s -&gt; &quot;Hey &quot; + s + &quot;!&quot; ).orElse( &quot;Hey Stranger!&quot; ) );</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><p>Stream API把真正的函数式编程风格引入到Java中，极大简化了集合框架的处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">package com.xingren.java8;</div><div class="line"></div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.Collection;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by xingren on 14/6/16.</div><div class="line"> */</div><div class="line">public class StreamsDemo &#123;</div><div class="line">    private enum Status &#123;</div><div class="line">        OPEN, CLOSED</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    private static final class Task &#123;</div><div class="line">        private final Status status;</div><div class="line">        private final Integer points;</div><div class="line"></div><div class="line">        Task( final Status status, final Integer points ) &#123;</div><div class="line">            this.status = status;</div><div class="line">            this.points = points;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public Integer getPoints() &#123;</div><div class="line">            return points;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public Status getStatus() &#123;</div><div class="line">            return status;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public String toString() &#123;</div><div class="line">            return String.format( &quot;[%s, %d]&quot;, status, points );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        final Collection&lt; Task &gt; tasks = Arrays.asList(</div><div class="line">                new Task(Status.OPEN, 5),</div><div class="line">                new Task(Status.OPEN, 13),</div><div class="line">                new Task(Status.CLOSED, 8)</div><div class="line">        );</div><div class="line"></div><div class="line">        // Calculate total points of all active tasks using sum()</div><div class="line">        final long totalPointsOfOpenTasks = tasks</div><div class="line">                .stream()</div><div class="line">                .filter( task -&gt; task.getStatus() == Status.OPEN )</div><div class="line">                .mapToInt( Task::getPoints )</div><div class="line">                .sum();</div><div class="line"></div><div class="line">        System.out.println( &quot;Total points: &quot; + totalPointsOfOpenTasks );</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>主函数做了哪些事？tasks集合被转化为其相应的stream表示，然后过滤掉状态为CLOSED的task；mapToInt操作通过Task::getPoints这种方式调用每个task实例的getPoints方法把Task的stream转化为Integer的stream；最后用sum函数把所有分数加起来。</p>
<p>Stream另一个亮点是，能够原生支持并行处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">final double totalPoints = tasks</div><div class="line">   .stream()</div><div class="line">   .parallel()</div><div class="line">   .map( task -&gt; task.getPoints() ) // or map( Task::getPoints ) </div><div class="line">   .reduce( 0, Integer::sum );</div><div class="line">     </div><div class="line">System.out.println( &quot;Total points (all tasks): &quot; + totalPoints );</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/10/Git命令之使用场景/" itemprop="url">
                  Git命令之使用场景
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-10T16:39:34+08:00" content="2016-06-10">
              2016-06-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/10/Git命令之使用场景/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/10/Git命令之使用场景/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这篇文章主要是给自己做一个备忘，本文主要结合使用场景介绍常用的Git指令。</p>
<h3 id="如何安装Git"><a href="#如何安装Git" class="headerlink" title="如何安装Git"></a>如何安装Git</h3><ol>
<li>Mac:安装<a href="http://brew.sh" target="_blank" rel="external">Homebrew</a>: <code>brew install git</code></li>
<li>Linux(Debian): <code>apt-get install git-core</code></li>
<li>Linux(Fedora): <code>yum install git-core</code></li>
</ol>
<h3 id="如何设定Git"><a href="#如何设定Git" class="headerlink" title="如何设定Git"></a>如何设定Git</h3><ol>
<li>Mac: <a href="https://help.github.com/articles/set-up-git/#platform-mac" target="_blank" rel="external">Set Up Git on Mac</a></li>
<li>Linux:<a href="https://help.github.com/articles/set-up-git/#platform-linux" target="_blank" rel="external">Set Up Git on Linux</a></li>
</ol>
<h3 id="如何创建一个Git-Repository"><a href="#如何创建一个Git-Repository" class="headerlink" title="如何创建一个Git Repository"></a>如何创建一个Git Repository</h3><ol>
<li>在本机任意路径下使用<code>git init</code> 初始化一个新的Git repo</li>
<li>使用<code>git clone</code> 拷贝远程机器上的项目到本机</li>
</ol>
<h3 id="如何将文件加入暂存区-Stage"><a href="#如何将文件加入暂存区-Stage" class="headerlink" title="如何将文件加入暂存区(Stage)"></a>如何将文件加入暂存区(Stage)</h3><ol>
<li>使用<code>git add</code>将新建文件加入Stage.</li>
<li><code>git add .</code>会将所有修改过的文件加入Stage</li>
</ol>
<h3 id="如何将文件从暂存区中移除（取消add）"><a href="#如何将文件从暂存区中移除（取消add）" class="headerlink" title="如何将文件从暂存区中移除（取消add）"></a>如何将文件从暂存区中移除（取消add）</h3><ol>
<li><code>git reset HEAD &quot;文件名&quot;</code></li>
</ol>
<h3 id="如何将暂存区文件提交到本地工作区"><a href="#如何将暂存区文件提交到本地工作区" class="headerlink" title="如何将暂存区文件提交到本地工作区"></a>如何将暂存区文件提交到本地工作区</h3><ol>
<li>使用<code>git commit</code> 会将暂存区中的文件添加到本地工作区</li>
<li><code>git commit -m &quot;commit信息&quot;</code> 使用commit的前提是，文件已经放到暂存区了。</li>
<li><code>git commit -am &quot;commit信息&quot;</code> 等同于先<code>git add .</code>后<code>git commit -m &quot;commit信息&quot;</code></li>
</ol>
<h3 id="如何修改-取消上一次的commit"><a href="#如何修改-取消上一次的commit" class="headerlink" title="如何修改/取消上一次的commit"></a>如何修改/取消上一次的commit</h3><ol>
<li><code>git commit --amend</code>修改上一次的commit信息</li>
<li><code>git reset HEAD^ --soft</code>取消刚刚的commit，但保留修改过的文件(<code>-- soft</code>保留暂存区和工作区不变)</li>
<li><code>git reset HEAD^ --hard</code>取消刚刚的commit，回到上一次commit的干净状态。(<code>--hard</code>重置暂存区和工作区) </li>
</ol>
<h3 id="分支基本操作-branch"><a href="#分支基本操作-branch" class="headerlink" title="分支基本操作(branch)"></a>分支基本操作(branch)</h3><ol>
<li><code>git branch</code>列出所有本地分支</li>
<li><code>git branch -r</code>列出所有远端分支</li>
<li><code>git branch -a</code>列出所有本地及远端分支</li>
<li><code>git branch &quot;新分支名称&quot;</code>创建新的本地分支</li>
<li><code>git checkout -b &quot;新分支名称&quot;</code>创建新分支并切换到该分支(仅仅创建一个分支，不会改变stage文件，也不会改变当前工作目录)</li>
<li><code>git checkout -b develop origin/develop</code>下载远程develop分支到本地develop分支，并切换到本地develop分支</li>
<li><code>git branch -d &quot;已存在的分支名称&quot;</code>删除本地分支</li>
<li><code>git push origin :远端分支</code>删除远端分支</li>
<li><code>git checkout “分支名称”</code>切换到另一个branch</li>
</ol>
<h3 id="远端操作-remote"><a href="#远端操作-remote" class="headerlink" title="远端操作(remote)"></a>远端操作(remote)</h3><ol>
<li><code>git push origin :远端分支</code> 删除远端分支</li>
<li><code>git pull origin 远端分支</code> 下载远端分支并合并到当前目录所在分支</li>
<li><code>git push origin 远端分支</code> 将本地的分支上传到远端</li>
</ol>
<h3 id="合并操作-merge"><a href="#合并操作-merge" class="headerlink" title="合并操作(merge)"></a>合并操作(merge)</h3><ol>
<li><code>git merge &quot;本地分支&quot;</code>合并指定分支到目前的分支</li>
</ol>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol>
<li>代码改动了，我想全部重来，如何快速回到干净的目录。<code>git reset --hard</code>这个指令会清除所有最近一次commit不同的修改。</li>
<li>merge过程中发生冲突，我想放弃merge，要如何取消merge？<code>git reset --hard</code>可以取消这次merge</li>
<li>如何取消这次merge会到merge前的状态？<code>git reset --hard ORIG_HEAD</code>这个指令会取消最近一次成功的merge以及所有你在这次merge后所做的修改。</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>最后，梳理一下整个流程。</p>
<pre><code>1.git init //初始化本地仓库
2.git clone git@git.oschina.net:shuangziliuyun/Hexo.git //拷贝远程项目到本地，这里只是举个栗子，把项目地址改成自己的即可。
3.touch README.md //新建文件
4.git add . //提交新建文件到暂存区(Stage)
5.git commit -m &quot;新增README.md文件&quot;//将暂存区的文件提交到工作区
6.git pull origin master //下载远端主分支，并合并到本地主分支。
7.git push origin master //提交本地分支到远端
</code></pre><h3 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h3><p>1.在push前必须pull并合并代码，以便在最新的代码上进行开发。<br>ß</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="https://docs.google.com/presentation/d/1JbKIKOO7szXR5TnEVyn5JFGAimgq4OXTyteX5aRstYU/edit?pref=2&amp;pli=1#slide=id.g1e072dff_3_57" target="_blank" rel="external">Git版本控制</a></li>
<li><a href="http://gogojimmy.net/2012/02/29/git-scenario/" target="_blank" rel="external">Git情景剧</a></li>
<li><a href="https://git-scm.com/book/zh/v1/Git-分支-远程分支" target="_blank" rel="external">Git 分支 - 远程分支</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/09/Mysql-for-Mac-安装和基本操作/" itemprop="url">
                  Mysql for Mac 安装和基本操作
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-09T17:28:23+08:00" content="2016-06-09">
              2016-06-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/MYSQL/" itemprop="url" rel="index">
                    <span itemprop="name">MYSQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/09/Mysql-for-Mac-安装和基本操作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/09/Mysql-for-Mac-安装和基本操作/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="mysql安装"><a href="#mysql安装" class="headerlink" title="mysql安装"></a>mysql安装</h3><p><a href="http://pan.baidu.com/s/1kVNb7bp" target="_blank" rel="external">mysql for mac 百度云下载链接</a></p>
<h3 id="mysql启动"><a href="#mysql启动" class="headerlink" title="mysql启动"></a>mysql启动</h3><p><img src="/images/mysql启动.png" alt="image"></p>
<h3 id="mysql关闭"><a href="#mysql关闭" class="headerlink" title="mysql关闭"></a>mysql关闭</h3><p><img src="/images/mysql关闭.png" alt="image"></p>
<h3 id="修改初始密码"><a href="#修改初始密码" class="headerlink" title="修改初始密码"></a>修改初始密码</h3><pre><code>／usr/local/mysql/bin/mysqladmin -u root password &quot;新密码&quot;
</code></pre><h3 id="卸载mysql"><a href="#卸载mysql" class="headerlink" title="卸载mysql"></a>卸载mysql</h3><pre><code>sudo rm /usr/local/mysql
sudo rm -rf /usr/local/mysql*
sudo rm -rf /Library/StartupItems/MySQLCOM
sudo rm -rf /Library/PreferencePanes/My*
vim /etc/hostconfig  (and removed the line MYSQLCOM=-YES-)
rm -rf ~/Library/PreferencePanes/My*
sudo rm -rf /Library/Receipts/mysql*
sudo rm -rf /Library/Receipts/MySQL*
sudo rm -rf /var/db/receipts/com.mysql.*
</code></pre><h3 id="将mysql-server的路径添加到PATH路径下"><a href="#将mysql-server的路径添加到PATH路径下" class="headerlink" title="将mysql.server的路径添加到PATH路径下"></a>将mysql.server的路径添加到PATH路径下</h3><pre><code>vi /etc/bashrc
# 在bashrc文件下增加以下内容
export PATH=/usr/local/mysql/support-files:$PATH
</code></pre><h3 id="保存只读文件bashrc"><a href="#保存只读文件bashrc" class="headerlink" title="保存只读文件bashrc"></a>保存只读文件bashrc</h3><p>向只读文件中添加内容，用wq保存出现以下错误</p>
<pre><code>E45: &apos;readonly&apos; option is set (add ! to override)
</code></pre><p>解决的方法：</p>
<pre><code>:w !sudo tee %

＃解释
:w – write
!sudo – call shell sudo command
tee – the output of write (:w) command is redirected using tee
% – current file name
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://oc5a5l0a0.bkt.clouddn.com/16-10-7/31807945.jpg"
               alt="流云" />
          <p class="site-author-name" itemprop="name">流云</p>
          <p class="site-description motion-element" itemprop="description">每天进步一点</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">147</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">流云</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io" rel="external nofollow">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
<a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"jianwl"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
