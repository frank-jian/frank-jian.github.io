---
title: HTTP使用的认证方式
date: 2016-04-28 14:25:08
tags: [HTTP]
categories: HTTP
---
Http使用的认证方式如下所示：
1. BASIC认证
2. DIGEST认证
3. SSL客户端认证
4. 基于表单的认证

### BASIC认证
1、当请求资源需要BASIC认证时，服务器会随状态码401，返回带WWW-Authenticate首部字段响应
2、接收到状态码401，需要将用户ID和密码发送给服务器。发送密码由用户ID和密码组成，中间用":"连接，后经过BASE64编码处理。
3、接收到首部字段你Authticate请求的服务器，会认证信息的正确性进行验证，通过验证，则返回Request-URI的响应。

缺点：
BASIC认证虽然采用BASE64编码，但这并不是加密，不需要附加任何信息就能将其解码。在认证过程中被窃听，泄露账号密码的可能性较高

### DIGEST认证
1、客户端发送请求给服务端
2、服务端发送临时的咨询码(随机数，nonce)以及告知需要认证的状态码401
3、客户端接收到状态码401，发送摘要以及由咨询码算出来的响应码
4、认证成功返回200，失败再次发送状态码401

缺点：
虽然可以提供防止密码被盗的保护机制，但无法防止伪装用户。

### SSL客户端认证
1、接收到认证资源的请求，服务端会发送Certificate Request报文，要求客户端提供客户端证书。
2、客户端会把客户端证书信息以Client Certificate报文方式发送给服务器。
3、服务器验证客户端证书，验证通过后方可领取证书内客户端的公开密钥。

缺点：
导入和维护的费用昂贵

### 基于表单认证
1、客户端向服务器端发送用户信息（ID和密码）；
2、服务端想用户发放SessionID，将包含SessionId的cookie放到响应首部字段Set-Cookie中
3、客户端得到Cookie，之后再次请求该资源时，会将Cookie信息带入到请求中
4、服务器得到Cookie信息，通过SessionId来判断对方是否为真实用户。

### 安全的做法
1、给密码加盐（salt）的方式增加额外的信息，在使用散列（hash）函数计算出散列值后保存。

盐(salt):由服务器随机生成的一个字符串，把和密码拼接后生成散列值。

